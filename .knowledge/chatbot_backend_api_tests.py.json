{"is_source_file": true, "format": "Python", "description": "Unit tests for API endpoints using Django REST Framework's APITestCase, testing health check and chat functionalities with mocked OpenAI client interactions.", "external_files": ["rest_framework.test", "django.urls", "unittest.mock"], "external_methods": ["rest_framework.test.APITestCase", "django.urls.reverse", "unittest.mock.patch"], "published": [], "classes": [{"name": "HealthTests", "description": "Test case for health check endpoint."}, {"name": "ChatTests", "description": "Test case for chat endpoint, including validation and successful response with mocked OpenAI client."}], "methods": [{"name": "test_health(self)", "description": "Verifies the health endpoint responds with status 200 and the message 'Server is up!'.", "scope": "HealthTests", "scopeKind": "class"}, {"name": "test_chat_requires_question(self, mock_client)", "description": "Verifies that posting empty data to the chat endpoint returns a 400 error with an 'error' key.", "scope": "ChatTests", "scopeKind": "class"}, {"name": "test_chat_success(self, mock_client)", "description": "Tests the chat endpoint with a mock OpenAI client, verifying that a question returns a proper answer.", "scope": "ChatTests", "scopeKind": "class"}, {"name": "__init__(self)", "scope": "ChatTests.test_chat_success.DummyCompletion", "scopeKind": "class", "description": "unavailable"}, {"name": "create(self, **kwargs)", "scope": "ChatTests.test_chat_success.DummyChatCompletions", "scopeKind": "class", "description": "unavailable"}], "calls": ["reverse('Health')", "self.client.get(url)", "self.assertEqual(response.status_code, 200)", "self.assertEqual(response.data, {\"message\": \"Server is up!\"})", "reverse('Chat')", "self.client.post(url, data={}, format=\"json\")", "self.assertIn(\"error\", response.data)", "self.client.post(url, data={\"question\": \"Hi\"}, format=\"json\")", "self.assertEqual(response.status_code, 200)", "self.assertEqual(response.data.get(\"answer\"), \"Hello!\")"], "search-terms": ["APITestCase", "HealthTests", "ChatTests", "mock_openai_client", "chat_endpoint", "health_endpoint"], "state": 2, "file_id": 7, "knowledge_revision": 43, "git_revision": "6744aeab2038a731d24d2021c207a7342805cc42", "revision_history": [{"25": "6744aeab2038a731d24d2021c207a7342805cc42"}, {"43": "6744aeab2038a731d24d2021c207a7342805cc42"}], "ctags": [{"_type": "tag", "name": "ChatTests", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^class ChatTests(APITestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DummyChat", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^        class DummyChat:$/", "file": true, "language": "Python", "kind": "class", "scope": "ChatTests.test_chat_success", "scopeKind": "member"}, {"_type": "tag", "name": "DummyChatCompletions", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^        class DummyChatCompletions:$/", "file": true, "language": "Python", "kind": "class", "scope": "ChatTests.test_chat_success", "scopeKind": "member"}, {"_type": "tag", "name": "DummyChoice", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^        class DummyChoice:$/", "file": true, "language": "Python", "kind": "class", "scope": "ChatTests.test_chat_success", "scopeKind": "member"}, {"_type": "tag", "name": "DummyClient", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^        class DummyClient:$/", "file": true, "language": "Python", "kind": "class", "scope": "ChatTests.test_chat_success", "scopeKind": "member"}, {"_type": "tag", "name": "DummyCompletion", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^        class DummyCompletion:$/", "file": true, "language": "Python", "kind": "class", "scope": "ChatTests.test_chat_success", "scopeKind": "member"}, {"_type": "tag", "name": "HealthTests", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^class HealthTests(APITestCase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^            def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ChatTests.test_chat_success.DummyChat", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^            def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ChatTests.test_chat_success.DummyChoice", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^            def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ChatTests.test_chat_success.DummyClient", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^            def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "ChatTests.test_chat_success.DummyCompletion", "scopeKind": "class"}, {"_type": "tag", "name": "create", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^            def create(self, **kwargs):$/", "language": "Python", "kind": "member", "signature": "(self, **kwargs)", "scope": "ChatTests.test_chat_success.DummyChatCompletions", "scopeKind": "class"}, {"_type": "tag", "name": "test_chat_requires_question", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^    def test_chat_requires_question(self, mock_client):$/", "language": "Python", "kind": "member", "signature": "(self, mock_client)", "scope": "ChatTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_chat_success", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^    def test_chat_success(self, mock_client):$/", "language": "Python", "kind": "member", "signature": "(self, mock_client)", "scope": "ChatTests", "scopeKind": "class"}, {"_type": "tag", "name": "test_health", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/tests.py", "pattern": "/^    def test_health(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "HealthTests", "scopeKind": "class"}], "hash": "a769a2dea6029053e269c0e4b146de71", "format-version": 4, "code-base-name": "chatbot_backend", "filename": "chatbot_backend/api/tests.py"}