{"is_source_file": true, "format": "Python", "description": "This file defines API views for a backend chatbot service, including endpoints for health checks and conversational queries. It utilizes Django Rest Framework and LangChain for interacting with OpenAI models, and includes Swagger schema annotations for API documentation.", "external_files": ["rest_framework.decorators", "rest_framework.permissions", "rest_framework.response", "rest_framework", "drf_yasg.utils", "drf_yasg", "langchain_openai", "langchain_core.prompts", "os", "typing"], "external_methods": ["rest_framework.decorators.api_view", "rest_framework.permissions.permission_classes", "rest_framework.renderers.renderer_classes", "rest_framework.response.Response", "drf_yasg.utils.swagger_auto_schema", "ChatPromptTemplate.from_messages", "ChatOpenAI", "openapi.Schema", "openapi.TYPE_OBJECT", "openapi.TYPE_STRING"], "published": ["health", "chat"], "classes": [], "methods": [{"name": "Any _build_prompt(system_prompt: Optional[str])", "description": "Constructs a LangChain ChatPromptTemplate with optional system prompt to generate chatbot prompts.", "scope": "", "scopeKind": ""}, {"name": "Optional[Any] _get_llm(model_name: str)", "description": "Initializes a LangChain ChatOpenAI object if environment variables and dependencies are correctly set; returns None otherwise.", "scope": "", "scopeKind": ""}, {"name": "chat(request)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "health(request)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["ChatPromptTemplate.from_messages", "ChatOpenAI", "chain.invoke"], "search-terms": ["chatbot API views", "LangChain OpenAI integration", "DRF Swagger schema", "health check endpoint", "dynamic prompt builder"], "state": 2, "file_id": 9, "knowledge_revision": 47, "git_revision": "66a038f2468ef5f629acde7d162089c9de863da3", "revision_history": [{"31": "6744aeab2038a731d24d2021c207a7342805cc42"}, {"39": "6744aeab2038a731d24d2021c207a7342805cc42"}, {"47": "66a038f2468ef5f629acde7d162089c9de863da3"}], "ctags": [{"_type": "tag", "name": "ChatOpenAI", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^    ChatOpenAI = None  # type: ignore$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "ChatPromptTemplate", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^    ChatPromptTemplate = None  # type: ignore$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_HAS_LANGCHAIN", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^    _HAS_LANGCHAIN = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_HAS_LANGCHAIN", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^    _HAS_LANGCHAIN = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "_build_prompt", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^def _build_prompt(system_prompt: Optional[str]) -> Any:$/", "language": "Python", "typeref": "typename:Any", "kind": "function", "signature": "(system_prompt: Optional[str])"}, {"_type": "tag", "name": "_get_llm", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^def _get_llm(model_name: str) -> Optional[Any]:$/", "language": "Python", "typeref": "typename:Optional[Any]", "kind": "function", "signature": "(model_name: str)"}, {"_type": "tag", "name": "chat", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^def chat(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "health", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^def health(request):$/", "language": "Python", "kind": "function", "signature": "(request)"}, {"_type": "tag", "name": "question_param", "path": "/home/kavia/workspace/code-generation/conversational-query-assistant-1326-1336/chatbot_backend/api/views.py", "pattern": "/^question_param = openapi.Schema($/", "language": "Python", "kind": "variable"}], "hash": "181f0e1e7e15fc14965481839f500426", "format-version": 4, "code-base-name": "chatbot_backend", "filename": "chatbot_backend/api/views.py", "fields": [{"name": "ChatOpenAI = None  # type: ignore", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "ChatPromptTemplate = None  # type: ignore", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_HAS_LANGCHAIN = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "_HAS_LANGCHAIN = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "question_param = openapi.Schema(", "scope": "", "scopeKind": "", "description": "unavailable"}]}